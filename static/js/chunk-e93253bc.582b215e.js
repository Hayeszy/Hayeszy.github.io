(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e93253bc"],{"0dad":function(e,t,a){},"0fbe":function(e,t,a){},1493:function(e,t,a){"use strict";a("0fbe")},"2c21":function(e,t,a){"use strict";a("bab3")},"482b":function(e,t,a){},"60cc":function(e,t,a){},"7b17":function(e,t,a){"use strict";a("482b")},"82e6":function(e,t,a){"use strict";a("60cc")},"94de":function(e,t,a){"use strict";a("0dad")},b199:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"g",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"h",(function(){return c})),a.d(t,"c",(function(){return u}));var n=a("b775");function i(e){return Object(n["a"])({url:"/api/task-service/task/search",params:e})}function r(e){return Object(n["a"])({url:"/api/task-service/task/search",params:e})}function s(e){return Object(n["a"])({url:"/api/task-service/task/create",method:"POST",data:e})}function l(e){return Object(n["a"])({url:"/api/vm-service/channel/channelList/".concat(e)})}function o(){return Object(n["a"])({url:"/api/task-service/task/supplyAlertValue"})}function c(e){return Object(n["a"])({url:"/api/task-service/task/autoSupplyConfig",method:"POST",data:e})}function u(e){return Object(n["a"])({url:"/api/user-service/user/repairerList/".concat(e)})}},bab3:function(e,t,a){},c0c6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("navbar",{attrs:{options:e.options},on:{searchOperation:e.searchOperation}}),a("div",{staticClass:"app-container"},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"padding-right":"10px"}},[a("cl_button",{attrs:{text:"新建",color:"backgroundColor:#FF883A",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.newAddFn(t)}}})],1),a("cl_button",{attrs:{text:"工单配置",color:"backgroundColor:##F4E8E2"},nativeOn:{click:function(t){return e.preWarning(t)}}})],1),a("div",{staticClass:"taskTable"},[a("taskTable",{attrs:{taskTable:e.taskTable,taskTitle:e.taskTitle,totalCount:e.totalCount,totalPage:e.totalPage,pageIndex:e.pageIndex},on:{transDetails:e.transDetails,nextPage:e.nextPage}})],1)]),a("newAdd",{attrs:{visible:e.dialogVisible,taskTitle:e.taskTitle,taskTable:e.taskTable},on:{"update:visible":function(t){e.dialogVisible=t}}}),a("checkDetail",{attrs:{visible:e.dialogVisibleDetails,detailMsg:e.detailMsg},on:{"update:visible":function(t){e.dialogVisibleDetails=t}}}),a("el-dialog",{attrs:{title:"工单配置",visible:e.isShow,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.isShow=t}}},[a("span",[e._v("补货警戒线：")]),a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10,width:"80%"},on:{change:e.handleChange},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),a("span",{staticClass:"dialog-footer",staticStyle:{margin:"auto"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.supplement}},[e._v("确 定")])],1)],1)],1)},i=[],r=a("c7eb"),s=a("1da1"),l=a("b199"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[e._v(" 工单编号: "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" 工单状态: "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1),a("cl_button",{attrs:{color:e.color,text:e.text,icon:e.icon},nativeOn:{click:function(t){return e.searchFn(t)}}})],1)])],1)],1)},c=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"btn",style:e.color},[a("span",{class:e.icon}),e._v(e._s(e.text)+" ")])])},d=[],p={data:function(){return{}},created:function(){},methods:{},props:{text:{type:String,required:!0},color:{type:String,required:!1},icon:{type:String,required:!1}}},b=p,m=(a("1493"),a("2877")),f=Object(m["a"])(b,u,d,!1,null,"17d96352",null),h=f.exports,v={data:function(){return{input:"",value:"",color:"background:#409EFF",text:"查询",icon:"el-icon-search"}},props:{options:{type:Array,required:!1}},created:function(){},methods:{searchFn:function(){this.$emit("searchOperation",{taskCode:this.input,status:this.value})}},components:{cl_button:h}},g=v,k=(a("94de"),Object(m["a"])(g,o,c,!1,null,"4c493cb7",null)),y=k.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%","max-height":"516px"},attrs:{data:e.taskTable,fit:!0}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._l(e.taskTitle,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.name,label:e.label,width:"145",fit:!0}})})),a("el-table-column",{attrs:{prop:"查看详情",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.transmsg(t.row)}}},[e._v("查看详情")])]}}])})],2),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("span",[e._v("共"+e._s(e.totalCount)+"条数据 第"+e._s(e.pageIndex)+"/"+e._s(e.totalPage)+"页")]),a("el-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.lastPage(t)}}},[e._v("上一页")]),a("el-button",{attrs:{type:"info"},nativeOn:{click:function(t){return e.nextPage(t)}}},[e._v("下一页 ")])],1)],1)},_=[],O={data:function(){return{tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},props:{taskTable:{type:Array,required:!0},taskTitle:{type:Array,required:!0},totalPage:{type:String,required:!0},totalCount:{type:String,required:!0},pageIndex:{type:String,required:!0}},methods:{transmsg:function(e){this.$emit("transDetails",e)},nextPage:function(){var e=parseInt(this.pageIndex)+1;this.$emit("nextPage",e)},lastPage:function(){var e=parseInt(this.pageIndex)-1;this.$emit("nextPage",e)}}},w=O,j=(a("82e6"),Object(m["a"])(w,x,_,!1,null,"7ad9987b",null)),C=j.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"新增工单",visible:e.visible,width:"60%","before-close":e.cancelFn}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"code",placeholder:"请输入"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),a("el-form-item",{attrs:{label:"工单类型",prop:"style"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.style,callback:function(t){e.$set(e.ruleForm,"style",t)},expression:"ruleForm.style"}},[a("el-option",{attrs:{label:"补货工单",value:"shanghai"}})],1)],1),a("el-form-item",{attrs:{label:"补货数量",prop:"no",underline:!1}},[a("el-link",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.ReplenishmentDetail(t)}}},[e._v("补货详情")])],1),a("el-form-item",{attrs:{label:"运营人员",prop:"person"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.person,callback:function(t){e.$set(e.ruleForm,"person",t)},expression:"ruleForm.person"}},e._l(e.taskTable,(function(e,t){return a("el-option",{key:t,attrs:{label:e.userName,value:e.assignorId}})})),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelFn}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1),a("ReplenishmentDetail",{ref:"ReplenishmentDetailList",attrs:{visible:e.dialogVisible,fromDate:e.ruleForm},on:{"update:visible":function(t){e.dialogVisible=t}}})],1)},D=[],F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"补货详情",visible:e.visible,width:"60%","before-close":e.handleClose}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.Details,height:"250",border:""}},[e._l(e.tableData,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.name,label:e.label,width:"150"}})})),a("el-table-column",{attrs:{prop:"item.name",label:"补满数量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("Edit")]),a("el-input-number",{attrs:{"controls-position":"right",min:0,max:t.row},on:{change:e.handleChange},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})]}}])})],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}},nativeOn:{click:function(t){return e.transDetailMsg(t)}}},[e._v("确 定")])],1)],1)},S=[],P={data:function(){return{tableData:[{label:"货道编号",name:"channelCode"},{label:"商品名称",name:"sku.brandName"},{label:"当前数量",name:"currentCapacity"},{label:"还可添加",name:"maxCapacity"}],Details:[]}},created:function(){},props:{visible:{type:Boolean,required:!0},fromDate:{type:Object,required:!0}},methods:{handleClose:function(){this.$emit("update:visible",!1)},ReplenishmentDetailList:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(e.fromDate.code);case 2:a=t.sent,e.Details=a.data;case 4:case"end":return t.stop()}}),t)})))()},transDetailMsg:function(){this.$emit()}}},$=P,I=Object(m["a"])($,F,S,!1,null,"51e6358a",null),V=I.exports,q={data:function(){return{ruleForm:{code:"",style:"",person:"",remark:""},rules:{code:[{required:!0,message:"请输入",trigger:"blur"}],style:[{required:!0,message:"请选择",trigger:"change"}],person:[{required:!0,message:"请填写",trigger:"blur"}],remark:[{required:!0,message:"请填写",trigger:"blur"}]},dialogVisible:!1}},props:{visible:{type:Boolean,required:!0},taskTable:{type:Array,required:!0},taskTitle:{type:Array,required:!0}},created:function(){},methods:{cancelFn:function(){this.$emit("update:visible",!1),this.$refs.form.resetFields(),this.ruleForm={code:"",style:"",person:"",remark:""}},add:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["b"])({assignorId:e.ruleForm.person,createType:2,desc:e.ruleForm.remark,details:[],innerCode:e.ruleForm.code,productType:2,userId:1});case 2:t.sent;case 3:case"end":return t.stop()}}),t)})))()},ReplenishmentDetail:function(){this.dialogVisible=!0,this.$refs.ReplenishmentDetailList.ReplenishmentDetailList()}},components:{ReplenishmentDetail:V}},R=q,M=Object(m["a"])(R,T,D,!1,null,"662add78",null),E=M.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"工单详情",visible:e.visible,width:"630px","before-close":e.handleClose}},[a("span",{staticClass:"taskdetail-container"},[a("div",{staticClass:"detail-header"},[a("i",{staticClass:"el-icon-warning"}),a("span",[e._v("取消")]),a("div",{staticClass:"right-img"})]),a("div",{staticClass:"detail-main"},[a("div",{staticClass:"main-left"},[a("p",[a("span",[e._v("设备编号:")]),a("span",[e._v(e._s(e.detailMsg.innerCode))])]),a("p",[a("span",[e._v("取消日期:")]),a("span",[e._v(e._s(e.detailMsg.updateTime))])]),a("p",[a("span",[e._v("工单类型:")]),e.detailMsg.taskType?a("span",[e._v(e._s(e.detailMsg.taskType.typeName))]):e._e()]),a("p",[a("span",[e._v("工单方式:")]),a("span",[e._v(e._s(1===e.detailMsg.creatrType?"手动":"自动"))])])]),a("div",{staticClass:"main-left"},[a("p",[a("span",[e._v("创建日期:")]),a("span",[e._v(e._s(e.detailMsg.createTime))])]),a("p",[a("span",[e._v("运营人员:")]),a("span",[e._v(e._s(e.detailMsg.userName))])]),a("p",[a("span",[e._v("补货数量:")]),a("span",[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.ReplenishmentDetail}},[e._v("补货详情")])],1)]),a("p",[a("span",[e._v("取消原因:")]),a("span",[e._v(e._s(e.detailMsg.desc))])])])]),a("el-button",{attrs:{size:"small"}},[e._v("重新创建")])],1),a("ReplenishmentDetail",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}})],1)},L=[],N=a("ade3"),z=Object(N["a"])({name:"",data:function(){return{taskDetail:{},dialogVisible:!1}},props:{visible:{type:Boolean,default:!1},detailMsg:{type:Object,required:!0}},components:{},computed:{},created:function(){},mounted:function(){},methods:{handleClose:function(e){this.$emit("update:visible",!1)},getTaskDetailInfo:function(e){return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["getTaskDetailInfoApi"])(e);case 2:case"end":return t.stop()}}),t)})))()},ReplenishmentDetail:function(){}},watch:{}},"components",{ReplenishmentDetail:V}),B=z,J=(a("7b17"),Object(m["a"])(B,A,L,!1,null,"7b204026",null)),W=J.exports,G={data:function(){return{options:["待办","进行","取消","完成"],taskTable:[],taskTitle:[{label:"工单编号",name:"taskCode"},{label:"设备编号",name:"innerCode"},{label:"工单类型",name:"taskType.typeName"},{label:"工单方式",name:"createType"},{label:"工单状态",name:"taskStatusTypeEntity.statusName"},{label:"运营人员",name:"userName"},{label:"创建日期",name:"createTime"}],totalCount:"",totalPage:"",pageIndex:"",dialogVisible:!1,dialogVisibleDetails:!1,detailMsg:{},isShow:!1,num:1}},created:function(){this.getTaskList()},methods:{getTaskList:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])({isRepair:!1});case 2:a=t.sent,e.taskTable=a.data.currentPageRecords,e.totalCount=a.data.totalCount,e.totalPage=a.data.totalPage,e.pageIndex=a.data.pageIndex;case 7:case"end":return t.stop()}}),t)})))()},searchOperation:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return"待办"===e.status?e.status="1":"进行"===e.status?e.status="2":"取消"===e.status?e.status="3":"完成"===e.status?e.status="4":e.status="",a.next=3,Object(l["g"])(e);case 3:n=a.sent,t.taskTable=n.data.currentPageRecords,t.totalCount=n.data.totalCount,t.totalPage=n.data.totalPage,t.pageIndex=n.data.pageIndex;case 8:case"end":return a.stop()}}),a)})))()},newAddFn:function(){this.dialogVisible=!0},cancelFn:function(){this.dialogVisible=!1},transDetails:function(e){this.dialogVisibleDetails=!0,this.detailMsg=e},nextPage:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["e"])({pageIndex:e,pageSize:10,isRepair:!1});case 2:n=a.sent,t.taskTable=n.data.currentPageRecords,t.totalCount=n.data.totalCount,t.totalPage=n.data.totalPage,t.pageIndex=n.data.pageIndex;case 7:case"end":return a.stop()}}),a)})))()},preWarning:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShow=!0,t.next=3,Object(l["f"])();case 3:case"end":return t.stop()}}),t)})))()},handleChange:function(e){},supplement:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShow=!1,t.next=3,Object(l["h"])({alertValue:e.num});case 3:case"end":return t.stop()}}),t)})))()},handleClose:function(){this.isShow=!1}},components:{navbar:y,cl_button:h,taskTable:C,newAdd:E,checkDetail:W}},H=G,K=(a("2c21"),Object(m["a"])(H,n,i,!1,null,"f222afbc",null));t["default"]=K.exports}}]);