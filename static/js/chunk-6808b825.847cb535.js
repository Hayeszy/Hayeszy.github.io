(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6808b825"],{"0f66":function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"d",(function(){return m}));var a=n("b775"),r=function(e){return Object(a["a"])({url:"/api/vm-service/region/search",params:e})};function i(e){return Object(a["a"])({url:"/api/vm-service/region",method:"POST",data:e})}function o(e){return Object(a["a"])({url:"/api/vm-service/region/"+e.id,method:"PUT",data:e})}function s(e){return Object(a["a"])({url:"/api/vm-service/region/"+e,method:"DELETE"})}function c(e){return Object(a["a"])({url:"/api/vm-service/node/search",params:e})}function l(e){return Object(a["a"])({url:"/api/vm-service/node",method:"POST",data:e})}var u=function(){return Object(a["a"])({url:"/api/vm-service/businessType"})},f=function(e,t){return Object(a["a"])({url:"/api/vm-service/node/"+e,method:"PUT",data:t})},d=function(e){return Object(a["a"])({url:"/api/user-service/partner/search",params:e})},p=function(e){return Object(a["a"])({url:"/api/vm-service/node/vmList/"+e})},m=function(e){return Object(a["a"])({url:"/api/vm-service/node/"+e,method:"DELETE"})}},"4bd9":function(e,t,n){},"511a":function(e,t,n){},7794:function(e,t,n){},"7ecb":function(e,t,n){"use strict";n("4bd9")},9395:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"my-btn",class:e.type},[n("span",[e._t("default")],2)])},r=[],i={name:"Button",components:{},props:{type:{type:String,default:""}},created:function(){},data:function(){return{}}},o=i,s=(n("7ecb"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"79382a4a",null);t["a"]=c.exports},aea5:function(e,t,n){},b922:function(e,t,n){"use strict";n("aea5")},c7d5:function(e,t,n){"use strict";n("7794")},de01:function(e,t,n){"use strict";n("511a")},fef5:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"search operation"},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"区域搜索："}},[n("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.searchContent.input,callback:function(t){e.$set(e.searchContent,"input",t)},expression:"searchContent.input"}})],1),n("el-form-item",[n("Button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.searchContionTask(e.searchContent)}}},[n("span",[n("svg",{staticStyle:{width:"16px",height:"16px","vertical-align":"middle",cursor:"pointer",color:"#fff"},attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-search"}})])]),e._v(" 查询")])],1)],1)],1),n("div",{staticClass:"Table"},[n("div",{staticClass:"operation"},[n("Button",{attrs:{type:"create"},nativeOn:{click:function(t){return e.add(t)}}},[n("span",[n("svg",{staticClass:"create",staticStyle:{width:"16px",height:"16px","vertical-align":"middle",cursor:"pointer",color:"#fff"},attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-Create"}})])]),e._v(" 新建")])],1),n("div",[n("el-table",{staticClass:"operation",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6"},size:"mini"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._l(e.tableTltle,(function(e,t){return n("el-table-column",{key:t,attrs:{prop:e.name,label:e.lable}})})),n("el-table-column",{attrs:{prop:"operate",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{color:"#5f84ff"},attrs:{type:"text"},nativeOn:{click:function(n){return e.showDetails(t.row)}}},[e._v("查看详情")]),n("el-button",{staticStyle:{color:"#5f84ff"},attrs:{type:"text"},nativeOn:{click:function(n){return e.showEdit(t.row)}}},[e._v("修改")]),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},nativeOn:{click:function(n){return e.delRegion(t.row)}}},[e._v("删除")])]}}])})],2)],1),n("div",{staticClass:"page operation",staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{staticClass:"content"},[n("span",[e._v("总共"+e._s(e.pageInfo.totalCount)+"记录 第"+e._s(e.pageInfo.pageIndex)+"/"+e._s(e.pageInfo.totalPage)+"页")])]),n("div",[n("el-button",{staticClass:"btn-prev",attrs:{disabled:1===this.pageInfo.pageIndex},on:{click:function(t){return e.prevClick()}}},[e._v("上一页")]),n("el-button",{staticClass:"btn-next",attrs:{disabled:this.pageInfo.pageIndex===this.pageInfo.totalPage},on:{click:function(t){return e.nextClick()}}},[e._v("下一页")])],1)])]),n("Added",{ref:"Added",attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},"add-success":e.geteRegionListApi}}),n("RegionDetails",{attrs:{infoVisible:e.infoVisible,info:e.info,infoName:e.infoName},on:{"update:infoVisible":function(t){e.infoVisible=t},"update:info-visible":function(t){e.infoVisible=t}}})],1)},r=[],i=n("c7eb"),o=n("1da1"),s=(n("b0c0"),n("9395")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,width:"40%"},on:{close:e.onClose}},[n("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.formData,rules:e.formRules}},[n("el-form-item",{attrs:{label:"区域名称",prop:"regionName"}},[n("el-input",{attrs:{type:"text",maxlength:"15","show-word-limit":"",placeholder:"请输入"},model:{value:e.formData.regionName,callback:function(t){e.$set(e.formData,"regionName",t)},expression:"formData.regionName"}})],1),n("el-form-item",{attrs:{label:"备注说明",prop:"remark"}},[n("el-input",{attrs:{maxlength:"40","show-word-limit":"",type:"textarea",placeholder:"请输入备注（不能超过40个字）"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticStyle:{"background-color":"#fbf4f0 !important",color:"#655b56 !important"},nativeOn:{click:function(t){return e.onClose()}}},[e._v("取 消")]),n("Button",{attrs:{type:"create"},nativeOn:{click:function(t){return e.onSave(t)}}},[e._v("确 定")])],1)],1)],1)},l=[],u=n("0f66"),f={props:{visible:{type:Boolean,required:!0}},data:function(){return{formData:{id:"",name:"",remark:""},formRules:{regionName:[{required:!0,message:"请输入区域名称",trigger:"blur"},{max:15,trigger:"change"}],remark:[{required:!0,message:"请输入备注说明",trigger:"blur"},{max:40,trigger:"change"}]}}},methods:{onClose:function(){this.$emit("update:visible",!1),this.formData={regionName:"",remark:"",id:""}},onSave:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(t.prev=2,!e.formData.id){t.next=11;break}return t.next=6,Object(u["i"])(e.formData);case 6:e.$message.success("修改成功"),e.onClose(),e.$emit("add-success"),t.next=16;break;case 11:return t.next=13,Object(u["b"])(e.formData);case 13:e.$message.success("新增区域成功"),e.onClose(),e.$emit("add-success");case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),e.$message.error("操作失败");case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},getIptValue:function(e){console.log(e),this.formData.regionName=e.name,this.formData.remark=e.remark,this.formData.id=e.id,console.log(this.formData)}},computed:{dialogTitle:function(){return this.formData.id?"修改区域":"新增区域"}},components:{Button:s["a"]}},d=f,p=(n("de01"),n("2877")),m=Object(p["a"])(d,c,l,!1,null,"102c1665",null),b=m.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"区域详情",visible:e.infoVisible,width:"40%"},on:{close:e.onClose}},[n("el-form",{ref:"form",attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"区域名称:"}},[n("span",[e._v(e._s(e.infoName))])]),n("el-form-item",{attrs:{label:"包含点位:"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.info,"empty-text":"暂无数据","header-cell-style":{background:"#eef1f6"}}},[e._v(" > "),n("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),n("el-table-column",{attrs:{prop:"name",label:"点位名称",width:"180"}}),n("el-table-column",{attrs:{prop:"vmCount",label:"设备数量"}})],1)],1)],1)],1)},h=[],v={name:"regionDetails",components:{},props:{infoVisible:{type:Boolean,required:!0},info:{type:Array,required:!0},infoName:{type:String,required:!0}},created:function(){},data:function(){return{}},methods:{onClose:function(){this.$emit("update:infoVisible",!1)}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){}},x=v,w=(n("c7d5"),Object(p["a"])(x,g,h,!1,null,"45ba1194",null)),k=w.exports,O={name:"",data:function(){return{pageInfo:{pageIndex:1,totalCount:null,totalPage:null},tableData:[],tableTltle:[{name:"name",lable:"区域名称"},{name:"nodeCount",lable:"点位数"},{name:"remark",lable:"备注说明"}],searchContent:{status:"",input:""},dialogFormVisible:!1,infoVisible:!1,info:[],infoName:""}},created:function(){this.geteRegionListApi()},methods:{geteRegionListApi:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var a;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["h"])(e);case 2:a=n.sent,console.log(a),t.tableData=a.data.currentPageRecords,t.pageInfo.pageIndex=parseInt(a.data.pageIndex),t.pageInfo.totalCount=parseInt(a.data.totalCount),t.pageInfo.totalPage=parseInt(a.data.totalPage);case 8:case"end":return n.stop()}}),n)})))()},nextClick:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.geteRegionListApi({pageIndex:"".concat(e.pageInfo.pageIndex+1)});case 1:case"end":return t.stop()}}),t)})))()},prevClick:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.geteRegionListApi({pageIndex:"".concat(e.pageInfo.pageIndex-1)});case 1:case"end":return t.stop()}}),t)})))()},searchContionTask:function(e){var t=e.input;this.geteRegionListApi({name:t})},add:function(){this.dialogFormVisible=!0},showEdit:function(e){this.dialogFormVisible=!0,this.$refs.Added.getIptValue(e)},showDetails:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var a;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["g"])({regionId:e.id});case 2:a=n.sent,t.info=a.data.currentPageRecords,t.infoName=e.name,t.infoVisible=!0;case 6:case"end":return n.stop()}}),n)})))()},delRegion:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$confirm("此操作将永久删除该区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return n.next=5,Object(u["e"])(e.id);case 5:t.$message.success("删除成功"),t.geteRegionListApi(),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()}},components:{Button:s["a"],Added:b,RegionDetails:k}},j=O,y=(n("b922"),Object(p["a"])(j,a,r,!1,null,"b7b1068c",null));t["default"]=y.exports}}]);